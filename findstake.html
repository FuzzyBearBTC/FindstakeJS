<html>
  <head>
	<meta name="description" content="javascript port of findstake: https://github.com/kac-/umint/tree/master/tools/findstake" />     
    <title>findstake with javascript</title>
<style type="text/css">
    .form-label-left{
        width:150px !important;
    }
    .form-line{
        padding-top:12px;
        padding-bottom:12px;
    }
    .form-label-right{
        width:150px !important;
    }
    body, html{
        margin:0;
        padding:0;
        background:false;
    }

    .form-all{
        margin:0px auto;
        padding-top:20px;
        width:650px;
        color:#555 !important;
        font-family:'Lucida Grande';
        font-size:14px;
    }
</style>	 
  </head>
  <body>
  
 <form class="jotform-form" name="form_50163742157351" id="50163742157351" accept-charset="utf-8">
  
  <div class="form-all">
    <ul class="form-section">
      <li class="form-line" data-type="control_textbox" id="id_8">
        <label class="form-label form-label-left form-label-auto" id="label_8" for="input_8"> difficulty </label>
        <div id="cid_8" class="form-input jf-required">
          <input type="text" class=" form-textbox" data-type="input-textbox" id="input_8" name="q8_difficulty" size="80" value="" placeholder="16.7" />
        </div>
      </li>
      <li class="form-line" data-type="control_textbox" id="id_9">
        <label class="form-label form-label-left form-label-auto" id="label_9" for="input_9"> pubAddress </label>
        <div id="cid_9" class="form-input jf-required">
          <input type="text" class=" form-textbox" data-type="input-textbox" id="input_9" name="q9_pubaddress" size="80" value="" placeholder="PBT3tGtxdjQ5ZLMYVqNbqohx8nr239Mwzs" />
        </div>
      </li>
      <li class="form-line" data-type="control_textbox" id="id_1">
        <label class="form-label form-label-left form-label-auto" id="label_1" for="input_1"> BlockFromTime </label>
        <div id="cid_1" class="form-input jf-required">
          <input type="text" class=" form-textbox" data-type="input-textbox" id="input_1" name="q1_blockfromtime1" size="80" value="" placeholder="2015-01-17 12:09:09" />
        </div>
      </li>
      <li class="form-line" data-type="control_textbox" id="id_3">
        <label class="form-label form-label-left form-label-auto" id="label_3" for="input_3"> StakeModifier </label>
        <div id="cid_3" class="form-input jf-required">
          <input type="text" class=" form-textbox" data-type="input-textbox" id="input_3" name="q3_stakemodifier" size="80" value="" placeholder="1" />
        </div>
      </li>
      <li class="form-line" data-type="control_textbox" id="id_5">
        <label class="form-label form-label-left form-label-auto" id="label_5" for="input_5"> PrevTxOffset </label>
        <div id="cid_5" class="form-input jf-required">
          <input type="text" class=" form-textbox" data-type="input-textbox" id="input_5" name="q5_prevtxoffset" size="80" value="" placeholder="1" />
        </div>
      </li>
      <li class="form-line" data-type="control_textbox" id="id_6">
        <label class="form-label form-label-left form-label-auto" id="label_6" for="input_6"> PrevTxTime </label>
        <div id="cid_6" class="form-input jf-required">
          <input type="text" class=" form-textbox" data-type="input-textbox" id="input_6" name="q6_prevtxtime" size="80" value="" placeholder="2013-09-05 15:24:00" />
        </div>
      </li>
      <li class="form-line" data-type="control_textbox" id="id_70">
        <label class="form-label form-label-left form-label-auto" id="label_70" for="input_70"> PrevTxOutIndex </label>
        <div id="cid_7" class="form-input jf-required">
          <input type="text" class=" form-textbox" data-type="input-textbox" id="input_70" name="q70_prevtxoutvalue" size="80" value="" placeholder="1" />
        </div>
      </li>	  
      <li class="form-line" data-type="control_textbox" id="id_7">
        <label class="form-label form-label-left form-label-auto" id="label_7" for="input_7"> PrevTxOutValue </label>
        <div id="cid_7" class="form-input jf-required">
          <input type="text" class=" form-textbox" data-type="input-textbox" id="input_7" name="q7_prevtxoutvalue" size="80" value="" placeholder="54120000" />
        </div>
      </li>
      <li class="form-line" data-type="control_button" id="id_2">
        <div id="cid_2" class="form-input-wide">
          <div style="margin-left:156px" class="form-buttons-wrapper">
		  <input type="button" id="actionFindStake" value="GO" style="color:blue" onclick="doFindStake(this);">
 
          </div>
        </div>
      </li>
      <li style="display:none">
        Should be Empty:
        <input type="text" name="website" value="" />
      </li>
    </ul>
  </div>
</form> 
  
  <div id="divresults" style="border-style: solid; border-width: 1px;">
  messages...
  
  </div>
  
  <br><br>
   
    <script src="biginteger.js" type="text/javascript"></script>
    <script src="sha256.js" type="text/javascript"></script>
    <script src="mint.js" type="text/javascript"></script>
	<script src="kernel.js" type="text/javascript"></script>
    <script type="text/javascript">   
 
///////////////////////////////////////////
//form events
///////////////////////////////////////////
 
var staketemp=null;
function doFindStake(button){
  if (button.value == "GO") {
    button.value = "STOP";
  } else {
    staketemp.Stop=true;
    button.value = "GO";
	staketemp=null;
	return;
  }
	
	var inputBlockFromTime = document.getElementById("input_1").value;
	var inputStakeModifier = document.getElementById("input_3").value;	
	var inputOffsetInBlock = document.getElementById("input_5").value;		
	var inputTime = document.getElementById("input_6").value;
	var inputVal = document.getElementById("input_7").value;	
	var inputIndex = document.getElementById("input_70").value;	
	var diffInput = document.getElementById("input_8").value;	
		
	function isNullOrWhiteSpace(str){	
		var ret = str == null || str.replace(/\s/g, '').length < 1;
		 
		if (!ret){
			var res=document.getElementById("divresults");
			res.innerHTML = res.innerHTML +'check inputvalues!!!<br>';	
		}
		return ret;
	}	
	if (isNullOrWhiteSpace(inputBlockFromTime)) return;	
	if (isNullOrWhiteSpace(inputStakeModifier)) return;	
	if (isNullOrWhiteSpace(inputOffsetInBlock)) return;	
	if (isNullOrWhiteSpace(inputTime)) return;	
	if (isNullOrWhiteSpace(inputVal)) return;	
	if (isNullOrWhiteSpace(inputIndex)) return;	
	if (isNullOrWhiteSpace(diffInput)) return;	
												 
	if (staketemp==null)
	{			
		var outx={};
		
		outx.BlockTime= Math.round(new Date(inputBlockFromTime).getTime()/1000);//utx.BlockTime;
		outx.StakeModifier=parseInt(inputStakeModifier, 10);	
		outx.OffsetInBlock=parseInt(inputOffsetInBlock, 10);
		outx.Time== Math.round(new Date(inputTime).getTime()/1000);//utx.Time;
		var prevTxOutIndex= parseInt(inputIndex, 10);
		outx.Value= parseInt(inputVal, 10);
		var dif=parseFloat(diffInput);

		staketemp = new StakeKernelTemplate();
		//findstake for this hour:
		staketemp.findStake(outx, prevTxOutIndex, dif, (Date.now() / 1000 | 0)+3600*1);
	}
}
//////////////////////////////////////////
</script>
  
  </body>
</html>